{"version":3,"sources":["wiplea_app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["$(document).ready(function() {\n\n    //All events must be catch when bubbling up to the main section\n    var elMain = $(\"#main\");\n\n    //Globals\n    var g = {\n        recipient: \"\",\n        recipient_id: \"\",\n        goal: \"\",\n        goal_id: \"\"\n    };\n\n    //Load menu\n    loadView('menu');\n\n    //Helper functions\n    function loadView(view) {\n        elMain.fadeOut(400, function() {\n            elMain.load('/view/'+view, function() {\n\n                //pre-load views information, draw/init special elements\n                if(view === 'plea' && g.recipient !== \"\" && g.goal !== \"\") {\n                    $('textarea[name=\"text\"]').val('Please, '+g.recipient+', help me with: '+g.goal);\n                }\n\n                if(view === 'goals') {\n                    $('#check_at').datepicker({\n                        autoclose: true,\n                        format: \"M d, yyyy\",\n                        weekStart: 1,\n                        startDate: new Date(+new Date() + 86400000*2), //starts the day after tomorrow\n                        daysOfWeekHighlighted: \"0,6\",\n                        todayHighlight: true\n                    });\n                }\n\n                elMain.fadeIn();\n            });\n        });\n    }\n\n    //Menu page handlers\n    elMain.on('click', '.btn-menu-plea', function() {\n        loadView('religions');\n    });\n    elMain.on('click', '.btn-menu-stats', function() {\n        loadView('stats');\n    });\n    elMain.on('click', '.btn-menu-read', function() {\n        loadView('read');\n    });\n\n    //Religions page handlers\n    elMain.on('click', '.item-religion', function() {\n        loadView('recipients/'+$(this).attr('data-id'));\n    });\n\n    //Recipients page handlers\n    elMain.on('click', '.item-recipient', function() {\n        g.recipient = $.trim($(this).text());\n        g.recipient_id = $(this).attr(\"data-id\");\n        loadView('goals');\n    });\n\n    //Goals page handlers\n    elMain.on('click', '.item-goal', function() {\n        g.goal = $.trim($(this).text());\n        g.goal_id = $(this).attr(\"data-id\");\n        loadView('plea');\n    });\n    elMain.on('click', '.btn-more-goals', function() {\n        loadView('goals');\n    });\n    elMain.on('submit', 'form#form-add-goal', function(e) {\n        elMain.off('click', '.item-goal');\n        var modal = $('#modal-add-goal');\n        $.post('/api/goal', $(this).serialize(), function(response) {\n            g.goal = response.text;\n            g.goal_id = response.id;\n            modal.on('hidden.bs.modal', function () {\n                loadView('plea');\n            });\n            modal.modal('hide');\n        });\n        e.preventDefault();\n    });\n\n    //Plea page handlers\n    elMain.on('submit', '#form-send-plea', function(e) {\n        $('input[name=recipient_id]').val(g.recipient_id);\n        $('input[name=goal_id]').val(g.goal_id);\n        $('input[name=is_public]').val(($('input[name=public]').prop('checked')) ? \"1\": \"0\");\n        $.post('/api/plea', $(this).serialize(), function() {\n            loadView('done');\n        });\n        e.preventDefault();\n    });\n\n    //Done/read page handlers\n    elMain.on('click', '.btn-return-menu', function() {\n        loadView('menu');\n    });\n\n    //Read pleas page handlers\n    elMain.on('click', '.btn-load-new-plea', function() {\n        loadView('read');\n    });\n\n});"],"sourceRoot":"/source/"}